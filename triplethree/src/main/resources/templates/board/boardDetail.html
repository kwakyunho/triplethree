<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layouts"
      layout:decorate="~{layouts/default}">

<!-- 사용자 타이틀 -->
<th:block layout:fragment="customTitle">
	<title>타이틀</title>
</th:block>

<!-- 사용자 CSS -->
<th:block layout:fragment="customCss">
	
</th:block>

<th:block layout:fragment="customContents">
<!-- Content Header (Page header) -->
<div class="content-header">
	<div class="container-fluid">
		<div class="row mb-2">
			<div class="col-sm-6">
				<h1 class="m-0 text-dark">게시판 관리</h1>
			</div><!-- /.col -->
			<div class="col-sm-6">
				<ol class="breadcrumb float-sm-right">
					<li class="breadcrumb-item">공지사항</li>
					<li class="breadcrumb-item"><a th:href="@{/boardInsert}" style="color:#28a745;">공지사항 작성</a></li>
					<li class="breadcrumb-item"><a th:href="@{/boardList}" style="color:#28a745;">공지사항 목록</a></li>
				</ol>
			</div><!-- /.col -->
		</div><!-- /.row -->
	</div><!-- /.container-fluid -->
</div>
<!-- /.content-header -->

	<div class="content" style="align-content: center">
	 <div class="col-12">
	     <div class="card">
	     <form class="boardDetailForm">
	       <div class="card-header">
                <h4 th:text="|[공지] ${board.boardTitle}|"></h4>
                <h6 style="color:#6c757d;">
                	<span style="float:left; padding-right:5px;" th:text="|작성자 : ${board.poname}|"></span>
                	<span style="float:left; padding-right:20px;" th:text="|${board.writer}|"></span>
                	<span style="float:left; padding-right:20px;" th:text="|작성일자 : ${board.writerDay}|"></span>
                	<span style="float:left;" th:text="|조회수 : ${board.boardCount}|"></span>
                </h6>
	       </div>
	       <div>
	       	<div class="card-body">
	       		
	       		<table class="table table-condensed" >
	       			<thead th:utext="${board.boardCon}"></thead>
	       		</table>
	       		<input type="hidden" name="code" th:id="${board.code}" th:value="${board.code}">
	       		<input type="hidden" name="boardPw" th:value="${board.boardPw}" id="boardPw">
	       	</div>
	       </div>
		</form>
	     </div>
	     <!-- /.card -->
	     <div class="col-12">
	     	<div class="row" id="detailBtns">
			     <div class="col-4">
						<button type="button" id="backBtn" class="btn btn-block btn-success btn-lg">목록</button>
			     </div>
			      <div class="col-4">
			      		<button type="button" id="updateBtn" class="btn btn-block btn-success btn-lg">수정</button>
			      		<!-- <a class = "btn btn-block btn-success btn-lg" style="color: #ffffff" th:href="@{/boardUpdate(code=${board.code})}">수정</a> -->
			     </div>
			      <div class="col-4">
			      		<button type="button" id="deleteBtn" class="btn btn-block btn-success btn-lg">삭제</button>
					<!-- 	<a class = "btn btn-block btn-success btn-lg" style="color: #ffffff" th:href="@{/boardDelete(code=${board.code})}">삭제</a> -->
			     </div>
		     </div>
	     </div>
	 </div>
	 </div>
			<!-- /.row -->
		<!-- /.container-fluid -->
	</th:block>
	
	<th:block layout:fragment="customScript">
	<script type="text/javascript">
	
	
	$(document).ready(function(){
		$('#backBtn').on('click', function(){	
			$('.boardDetailForm').attr('method', 'POST');
			$('.boardDetailForm').attr('action', '/boardList');
			$('.boardDetailForm').submit();
		});
		
	var dbPw = $('#boardPw').val(); //게시글 비밀번호
	//console.log(dbPw + ': 이것은 boardPw');
	$('#updateBtn').on('click',function(){
			if (confirm("수정하시겠습니까") == true){  //확인
				var inputPw = prompt('비밀번호를 입력하세요(1111)');
				if(dbPw==inputPw){
					alert('수정화면으로 이동합니다');
					$('.boardDetailForm').attr('method', 'POST');
					$('.boardDetailForm').attr('action', '/goBoardUpdate');
					$('.boardDetailForm').submit();
				}else{
					alert('비밀번호가 일치하지 않습니다');
					return;
				}
			}else{   //취소
			    return;
			}
	
	});
		
	$('#deleteBtn').on('click',function(){
		if (confirm("정말 삭제하시겠습니까??") == true){  //확인
			var inputPw = prompt('비밀번호를 입력하세요');
			console.log(inputPw + ': 이것은 입력 비밀번호');
			if(dbPw==inputPw){
				$(function(){
					$(document).Toasts('create', {
				        class: 'bg-success', 
				        title: '게시글 삭제',
				        subtitle: 'success',
				        sticky : true,
				        body: '게시글 삭제가 완료되었습니다'
				      });
					delay(5000);
				});
				$('.boardDetailForm').attr('method', 'POST');
				$('.boardDetailForm').attr('action', '/boardDelete');
				$('.boardDetailForm').submit();
				
			}else{
				alert('비밀번호가 일치하지 않습니다');
				
				return;
			}
		}else{   //취소
		    return;
		}
	
	})
		
	});
	</script>
	
	</th:block>
	<script></script>
	</html>